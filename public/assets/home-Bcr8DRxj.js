import"./modulepreload-polyfill-B5Qt9EMX.js";let f=localStorage.getItem("name");document.getElementById("name").innerHTML=f;const w=document.querySelector(".get_users");w.addEventListener("click",v);async function v(){console.log("Button clicked!");try{const e=localStorage.getItem("token"),r=await(await fetch("https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/users",{headers:{Authorization:"Bearer: "+e}})).json();console.log(r);const a=document.querySelector(".tbody");a.innerHTML="",r.forEach(n=>{console.log(n.username);let o=document.createElement("tr"),c=document.createElement("td");c.innerText=n.username;let l=document.createElement("td");l.innerText=n.user_level;let i=document.createElement("td"),d=document.createElement("button");d.className="check",d.setAttribute("data-id","1"),d.innerText="Info",d.addEventListener("click",()=>I(n.user_id)),i.appendChild(d);let u=document.createElement("td"),s=document.createElement("button");s.className="del",s.setAttribute("data-id","1"),s.innerText="Delete",s.innerText="Delete",s.addEventListener("click",()=>k(n.user_id)),u.appendChild(s);let m=document.createElement("td");m.innerText=n.user_id,o.appendChild(c),o.appendChild(l),o.appendChild(i),o.appendChild(u),o.appendChild(m),a.appendChild(o)})}catch(e){console.log(e)}}async function I(e){try{const t=localStorage.getItem("token"),a=await(await fetch(`https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/users/${e}`,{method:"GET",headers:{Authorization:"Bearer: "+t}})).json();console.log(a),T(a)}catch(t){console.error("Error fetching user data:",t)}}function T(e){const t=document.querySelector(".info_dialog"),r=t.querySelectorAll("span");r[0].innerText=e.user_id,r[1].innerText=e.username,r[2].innerText=e.email,r[3].innerText=e.user_level,t.showModal(),t.querySelector("button[autofocus]").addEventListener("click",()=>{t.close()})}async function k(e){try{const t=localStorage.getItem("token");if(!confirm(`Are you sure you want to delete the user with ID: ${e}?`))return;if(!(await fetch(`https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/users/${e}`,{method:"DELETE",headers:{Authorization:"Bearer: "+t}})).ok)throw new Error("Failed to delete user");console.log("User deleted successfully")}catch(t){console.error("Error deleting user:",t)}}async function B(e){try{const t=localStorage.getItem("token");if(!confirm(`Are you sure you want to delete the entry with ID: ${e}?`))return;if(!(await fetch(`https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/entries/${e}`,{method:"DELETE",headers:{Authorization:"Bearer: "+t}})).ok)throw new Error("Failed to delete entry");console.log("entry deleted successfully")}catch(t){console.error("Error deleting entry:",t)}}const b=document.getElementById("postUserButton");b.addEventListener("click",async()=>{const e=document.getElementById("username").value,t=document.getElementById("password").value,r=document.getElementById("email").value,a={username:e,password:t,email:r};try{if(!(await fetch("https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to add user");window.alert("User added successfully")}catch(n){window.alert("Error adding user: "+n.message)}});const C=document.getElementById("putUserButton");C.addEventListener("click",async()=>{const e=localStorage.getItem("token"),t=document.getElementById("username").value,r=document.getElementById("password").value,a=document.getElementById("email").value,n={username:t,password:r,email:a};try{if(!(await fetch("https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/users/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(n)})).ok)throw new Error("Failed to update user");window.alert("User updated successfully")}catch(o){window.alert("Error updating user: "+o.message)}});const E=[],y=document.getElementById("sleepFrom"),g=document.getElementById("output");y.addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("entry_id").value,r=document.getElementById("entry_date").value,a=document.getElementById("mood").value,n=parseFloat(document.getElementById("weight").value),o=parseFloat(document.getElementById("sleep_hour").value),c=document.getElementById("notes").value,l=new Date().toISOString(),i={entry_id:t,entry_date:r,mood:a,weight:n,sleep_hour:o,notes:c,created_at:l};E.push(i),S(),y.reset()});function S(){g.innerHTML="<h2>Sy√∂tetyt urheilutiedot:</h2>",E.forEach(function(e,t){g.innerHTML+=`
            <div>
                <strong>Entry ${t+1}:</strong><br>
                Entry ID: ${e.entry_id}<br>
                Entry Date: ${e.entry_date}<br>
                Mood: ${e.mood}<br>
                Weight: ${e.weight}<br>
                Sleep Hours: ${e.sleep_hour}<br>
                Notes: ${e.notes}<br>
                Created At: ${e.created_at}<br>
            </div><br>`})}const _=document.querySelector(".output");_.addEventListener("click",x);async function x(){console.log("Button clicked!");try{const e=localStorage.getItem("token"),r=await(await fetch("https://hyte-server-vichy.northeurope.cloudapp.azure.com/api/entries",{headers:{Authorization:"Bearer: "+e}})).json();console.log(r);const a=document.querySelector(".tbody1");a.innerHTML="",r.forEach(n=>{let o=document.createElement("tr"),c=document.createElement("td");c.innerText=n.entry_id;let l=document.createElement("td");l.innerText=n.entry_date;let i=document.createElement("td");i.innerText=n.mood;let d=document.createElement("td");d.innerText=parseFloat(n.weight).toFixed(2);let u=document.createElement("td");u.innerText=parseInt(n.sleep_hours);let s=document.createElement("td");s.innerText=n.notes;let m=document.createElement("td");m.innerText=n.created_at;let h=document.createElement("td"),p=document.createElement("button");p.className="del",p.setAttribute("data-id",n.entry_id),p.innerText="Delete",p.addEventListener("click",()=>B(n.entry_id)),h.appendChild(p),o.appendChild(c),o.appendChild(l),o.appendChild(i),o.appendChild(d),o.appendChild(u),o.appendChild(s),o.appendChild(m),o.appendChild(h),a.appendChild(o)})}catch(e){console.log(e)}}document.querySelector(".logout").addEventListener("click",D);function D(e){e.preventDefault(),localStorage.removeItem("token"),console.log("logginout"),window.location.href="index.html"}
